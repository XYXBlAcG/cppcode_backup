题面：

一个机器有 $n\;(\le10^3)$ 个齿轮和 $m\;(\le10^4)$ 段链条。每段链条会给出 $u, v, x, y, s$ 几个参数，表示链条连接齿轮 $u$ 和 $v$，传动比为 $x:y$  ($x, y$ 是不超过 $10^8$ 的正整数)，两个齿轮的转动方向为 $s$ ($s\;=\;1$ 为同向，$s\;=\;-1$ 为反向，$s$ 只有这两种取值)。传动比是指当齿轮 $u$ 旋转 $x$ 圈时，齿轮 $v$ 旋转 $y$ 圈。问整个系统是否会卡住。需要注意可能用到高精度。

解答：

##### 